(this["webpackJsonpmap-app"]=this["webpackJsonpmap-app"]||[]).push([[0],{174:function(e,t,a){e.exports={statisticAddon:"MeanPriceInFilterLocation_statisticAddon__ZZijL",textGreen:"MeanPriceInFilterLocation_textGreen__1TxZ3",textRed:"MeanPriceInFilterLocation_textRed__2oGI9"}},175:function(e,t,a){e.exports={container:"App_container__1MQN3",grid:"App_grid__3DnSg",leftPanel:"App_leftPanel__3Hl9k",rightPanel:"App_rightPanel__kN-EW",githubCorner:"App_githubCorner__3BLKB"}},244:function(e,t,a){e.exports={content:"SplitPaneLeft_content__4SUVj",highlightedText:"SplitPaneLeft_highlightedText__2q005"}},245:function(e,t,a){e.exports={currency:"AreaOverview_currency__1aglq",label:"AreaOverview_label__1Cauv",amount:"AreaOverview_amount__KkYcy"}},300:function(e,t,a){e.exports={shake:"Navigation_shake__1loJY","bell-shake":"Navigation_bell-shake__28FvC",notificationLink:"Navigation_notificationLink__dwBb-"}},307:function(e,t,a){e.exports={container:"PropertyPriceChart_container__b6m2Q",tooltip:"PropertyPriceChart_tooltip__iGhsd"}},308:function(e,t,a){e.exports={container:"PropertyPriceLine_container__3NyhK",tooltip:"PropertyPriceLine_tooltip__1tDKM"}},314:function(e,t,a){e.exports={container:"PropertyTypeChart_container__3smv6",title:"PropertyTypeChart_title__1REaR"}},315:function(e,t,a){e.exports={container:"MapOverlay_container__16kzn"}},427:function(e,t,a){e.exports={container:"FilterToolbar_container__3xqZF"}},453:function(e,t,a){e.exports={container:"SplitPaneRight_container__x3kzx"}},570:function(e,t,a){e.exports=a(818)},817:function(e,t,a){},818:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(34),c=a.n(l),o=a(31),i=a(418),s=a(220),u=a(221),m=a(146),p=new s.a({cache:new u.a,link:new m.a({uri:"https://api.brokalys.com"})}),d=a(424),g=a.n(d),f=a(857),v=a(869),E=a(19),b=a(158),y=a(241),h=a(868),_=a(862),O=a(865),j=a(295),x=a.n(j),S=a(425),k=a.n(S);x.a.start({releaseStage:"production",enabledReleaseStages:["production"],apiKey:"d834235e29f9f8aba796385d728e56f2",plugins:[new k.a],collectUserIp:!1});var w=x.a,N=a(864),P=a(859),C=a(296),$=a(35),L=a.n($),M=a(132),R=a(57),Y=a(426),A=a.n(Y),B=Object(o.atom)({key:"filters",default:{category:"apartment",type:"sell",location:"latvia-riga-vecpilseta",priceType:"total"}}),F=Object(o.selector)({key:"filters.category",get:function(e){return(0,e.get)(B).category},set:function(e,t){var a=e.get;return(0,e.set)(B,Object(R.a)(Object(R.a)({},a(B)),{},{category:t}))}}),I=Object(o.selector)({key:"filters.type",get:function(e){return(0,e.get)(B).type},set:function(e,t){var a=e.get;return(0,e.set)(B,Object(R.a)(Object(R.a)({},a(B)),{},{type:t}))}}),q=Object(o.selector)({key:"filters.location",get:function(e){return(0,e.get)(B).location},set:function(e,t){var a=e.get;return(0,e.set)(B,Object(R.a)(Object(R.a)({},a(B)),{},{location:t}))}}),T=Object(o.selector)({key:"filters.priceType",get:function(e){return(0,e.get)(B).priceType},set:function(e,t){var a=e.get;return(0,e.set)(B,Object(R.a)(Object(R.a)({},a(B)),{},{priceType:t}))}}),D=Object(o.selectorFamily)({key:"getPrices",get:function(e){return function(){var t=Object(M.a)(L.a.mark((function t(a){var n,r,l,c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=function(){return(l=Object(M.a)(L.a.mark((function e(){var t,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("https://static-api.brokalys.com/stats/monthly?discard=0.1&filters=".concat(n));case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},r=function(){return l.apply(this,arguments)},a.get,n=encodeURIComponent(JSON.stringify(e)),c=0,t.abrupt("return",new Promise(function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:if(!(0===(n=e.sent).loadingResults||c++>=3)){e.next=5;break}return e.abrupt("return",a(n));case 5:setTimeout((function(){return t(a)}),n.loadingResults<=2?1e3:3e3);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),V=Object(o.selector)({key:"priceInFilteredLocation",get:function(){var e=Object(M.a)(L.a.mark((function e(t){var a,n,r,l;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.get,n=a(q),r=a(I),l=a(F),e.next=6,a(D({category:l,type:r,location_classificator:n}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),G=Object(o.selector)({key:"meanPriceLastMonth",get:function(){var e=Object(M.a)(L.a.mark((function e(t){var a,n,r,l,c,o,i,s,u;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.get,n=a(q),r=a(I),l=a(F),c=a(T),e.next=7,a(D({category:l,type:r,location_classificator:n}));case 7:return o=e.sent,i=o.results,s="sqm"===c?"pricePerSqm":"price",u=i[i.length-1][s].mean,e.abrupt("return",{price:u,change:{mom:100*(1-u/i[i.length-2][s].mean),yoy:100*(1-u/i[i.length-13][s].mean)}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),W=Object(o.selector)({key:"rentalYield",get:function(){var e=Object(M.a)(L.a.mark((function e(t){var a,n,r,l,c,o,i,s,u;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.get,n=a(F),r=a(q),l=a(T),e.next=6,Promise.all([a(D({category:n,type:"sell",location_classificator:r})),a(D({category:n,type:"rent",location_classificator:r}))]);case 6:return c=e.sent,o=Object(E.a)(c,2),i=o[0].results,s=o[1].results,u="sqm"===l?"pricePerSqm":"price",e.abrupt("return",s[s.length-1][u].mean/i[i.length-1][u].mean*100);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),z=a(427),H=a.n(z),U=b.riga.features.map((function(e){return{value:e.properties.id,text:e.properties.name}})),J=[{value:"apartment",text:"Apartment"},{value:"house",text:"House"},{value:"land",text:"Land"}],K=[{value:"sell",text:"Sell"},{value:"rent",text:"Rent"}],Z=[{value:"total",text:"Total price"},{value:"sqm",text:"Price/sqm"}];var Q=function(){var e=Object(o.useRecoilState)(q),t=Object(E.a)(e,2)[1],a=Object(o.useRecoilState)(F),n=Object(E.a)(a,2)[1],l=Object(o.useRecoilState)(I),c=Object(E.a)(l,2)[1],i=Object(o.useRecoilState)(T),s=Object(E.a)(i,2)[1];return r.a.createElement("div",{className:H.a.container},r.a.createElement(N.a,{secondary:!0},r.a.createElement(N.a.Item,{fitted:!0},r.a.createElement(P.a,{placeholder:"Select location",search:function(e,t){var a=new RegExp(Object(C.transliterate)(t),"i");return e.filter((function(e){return a.test(Object(C.transliterate)(e.text))}))},selection:!0,defaultValue:"latvia-riga-vecpilseta",options:U,onChange:function(e,a){return t(a.value)}})),r.a.createElement(N.a.Item,{fitted:!0},r.a.createElement(P.a,{placeholder:"Select category",fluid:!0,selection:!0,defaultValue:"apartment",options:J,onChange:function(e,t){return n(t.value)}})),r.a.createElement(N.a.Item,{fitted:!0},r.a.createElement(P.a,{placeholder:"Select type",fluid:!0,selection:!0,defaultValue:"sell",options:K,onChange:function(e,t){return c(t.value)}})),r.a.createElement(N.a.Item,{fitted:!0},r.a.createElement(P.a,{placeholder:"Select price type",fluid:!0,selection:!0,defaultValue:"total",options:Z,onChange:function(e,t){return s(t.value)}}))))},X=a(860),ee=a(172),te=a(863),ae=a(300),ne=a.n(ae);var re=function(){return r.a.createElement(N.a,{secondary:!0},r.a.createElement(N.a.Header,null,r.a.createElement("img",{src:"https://brokalys.com/favicon.png",alt:"logo",height:"40px"})),r.a.createElement(N.a.Item,{position:"right"},r.a.createElement(X.a,{content:"Sign up for instant notifications about classifieds matching your parameters",inverted:!0,position:"bottom right",trigger:r.a.createElement("a",{href:"https://pinger.brokalys.com",target:"_blank",rel:"noopener noreferrer",className:ne.a.notificationLink,"data-testid":"pinger-button"},r.a.createElement(ee.a,{name:"bell outline",className:ne.a.shake}))})),r.a.createElement(N.a.Item,{fitted:!0},r.a.createElement(te.a,{primary:!0,animated:"vertical",onClick:function(){window.location.href="mailto:matiss@brokalys.com?subject=Feedback"}},r.a.createElement(te.a.Content,{visible:!0},"Give feedback"),r.a.createElement(te.a.Content,{hidden:!0},r.a.createElement(ee.a,{name:"mail"})))))},le=a(841),ce=a(854),oe=a(8),ie=a(867),se=a(866),ue=a(855),me=a(126),pe=a.n(me),de=a(240),ge=a(307),fe=a.n(ge);function ve(){var e=Object(o.useRecoilValue)(T),t=Object(o.useRecoilValue)(V).results,a=Object(n.useMemo)((function(){return[{id:"Average Price",data:t.map((function(t){var a="sqm"===e?t.pricePerSqm:t.price;return Object(R.a)(Object(R.a)({},a),{},{x:t.start_datetime.substr(0,10),y:a.mean})}))}]}),[t,e]),l=a[0].data.reduce((function(e,t){var a=t.max;return a>e?a:e}),0);function c(t){var a=t.value;return r.a.createElement("span",null,Number(a).toLocaleString("en",{minimumFractionDigits:2})," ","sqm"===e?r.a.createElement("span",null,"EUR/m",r.a.createElement("sup",null,"2")):"EUR")}return r.a.createElement(de.a,{data:a,margin:{top:10,right:10,bottom:100,left:50},xScale:{type:"time",format:"%Y-%m-%d",precision:"month"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",stacked:!1,max:1.05*l},sliceTooltip:function(e){var t=e.slice;return r.a.createElement("div",{className:fe.a.tooltip},t.points.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("div",null,r.a.createElement("strong",null,pe()(e.data.x).format("YYYY-MM-DD"))),r.a.createElement("div",null,r.a.createElement("strong",null,"Min:")," ",r.a.createElement(c,{value:e.data.min})),r.a.createElement("div",null,r.a.createElement("strong",null,e.serieId,":")," ",r.a.createElement(c,{value:e.data.yFormatted})),r.a.createElement("div",null,r.a.createElement("strong",null,"Max:")," ",r.a.createElement(c,{value:e.data.max})),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("strong",null,"Mode:")," ",r.a.createElement(c,{value:e.data.mode})),r.a.createElement("div",null,r.a.createElement("strong",null,"Median:")," ",r.a.createElement(c,{value:e.data.median})))})))},axisBottom:{format:"%Y-%m",tickValues:"every 2 months",tickRotation:-90},enablePoints:!0,curve:"monotoneX",useMesh:!0,enableSlices:"x",layers:["grid","markers","axes","areas","crosshair",Ee,"lines","points","slices","mesh","legends"]})}function Ee(e){var t=e.series,a=e.xScale,n=e.yScale,l=(e.innerHeight,Object(le.a)().x((function(e){return a(e.data.x)})).y0((function(e){return n(e.data.min)})).y1((function(e){return n(e.data.max)})).curve(ce.a));return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.c,{defs:[{id:"pattern",type:"patternLines",background:"transparent",color:"#3daff7",lineWidth:1,spacing:6,rotation:-45}]}),r.a.createElement("path",{d:l(t[0].data),fill:"url(#pattern)",fillOpacity:.2,stroke:"#3daff7",strokeWidth:.4}))}var be=function(){return r.a.createElement(ie.a,{basic:!0,className:fe.a.container},r.a.createElement(y.ErrorBoundary,{fallback:r.a.createElement(_.a,{negative:!0},"Failed loading chart data. Please try again later."),onError:w.notify},r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(se.a,{inverted:!0,active:!0},r.a.createElement(ue.a,null))},r.a.createElement(ve,null))))},ye=a(170),he=a(164),_e=a.n(he),Oe=a(174),je=a.n(Oe);function xe(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"MoM: month-over-month"),r.a.createElement("p",null,"YoY: year-over-year"))}function Se(){var e=Object(o.useRecoilValue)(T),t=Object(o.useRecoilValue)(G),a=t.price,n=t.change.mom,l=t.change.yoy;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a.Value,null,r.a.createElement("div",{className:je.a.statisticAddon},isFinite(n)&&r.a.createElement("div",null,r.a.createElement("span",{className:n<0?je.a.textGreen:je.a.textRed},n<0?"+":"",-n.toFixed(2),"%")," ","MoM"),isFinite(l)&&r.a.createElement("div",null,r.a.createElement("span",{className:l<0?je.a.textGreen:je.a.textRed},l<0?"+":"",-l.toFixed(2),"%")," ","YoY")),parseInt(a,10).toLocaleString("en")),r.a.createElement(O.a.Label,null,"Average Price (EUR","sqm"===e?r.a.createElement("span",null,"/m",r.a.createElement("sup",null,"2")):"",") ",r.a.createElement(ye.Tooltip,{content:r.a.createElement(xe,null),children:r.a.createElement(ye.Icon,{icon:"help"})})))}var ke=function(){return r.a.createElement(O.a,null,r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(_e.a,{height:60,width:240})},r.a.createElement(Se,null)))};function we(){var e=Object(o.useRecoilValue)(W);return r.a.createElement(O.a.Value,null,e.toFixed(2),"%")}function Ne(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"How much of the invested capital can I expect to make back each year?"),r.a.createElement("p",null,"A bigger number is better for landlords; a smaller - for renters."),r.a.createElement("p",null,"Calculation: average rent price / sell price in the last month"))}var Pe=function(){return r.a.createElement(O.a,null,r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(_e.a,{height:42})},r.a.createElement(we,null)),r.a.createElement(O.a.Label,null,"Rental Yield"," ",r.a.createElement(ye.Tooltip,{content:r.a.createElement(Ne,null),children:r.a.createElement(ye.Icon,{icon:"help"})})))},Ce=a(244),$e=a.n(Ce);var Le=function(){var e=Object(o.useRecoilState)(B),t=Object(E.a)(e,1)[0],a=b.riga.features.find((function(e){return e.properties.id===t.location})).properties.name;return r.a.createElement("div",{className:$e.a.container},r.a.createElement(re,null),r.a.createElement("div",{className:$e.a.content},r.a.createElement(h.a,{as:"h2"},"Average Prices in"," ",r.a.createElement("span",{className:$e.a.highlightedText},a)),r.a.createElement(Q,null),r.a.createElement(be,null),r.a.createElement("div",null,r.a.createElement(h.a,{as:"h3"},"Last Month"),r.a.createElement(y.ErrorBoundary,{fallback:r.a.createElement(_.a,{negative:!0},"Failed loading the data. Please try again later."),onError:w.notify},r.a.createElement(O.a.Group,{size:"small"},r.a.createElement(ke,null),r.a.createElement(Pe,null))))))},Me=a(316),Re=r.a.createContext(),Ye={lat:56.9032640496857,lng:24.09330663700942},Ae={width:"100%",height:"100%"};var Be=r.a.memo((function(e){var t=r.a.useState(null),a=Object(E.a)(t,2),l=a[0],c=a[1],o=Object(Me.b)({googleMapsApiKey:"AIzaSyADke6h-GKt5dPB8IcjVeQ0lAaC1wL_LwY"}),i=o.isLoaded,s=o.loadError,u=Object(n.useContext)(Re);function m(){var e=l.getDiv().clientHeight,t=1-document.getElementById("map-overlay").offsetTop/e,a={nw:{lat:l.getBounds().getSouthWest().lat()+(l.getBounds().getNorthEast().lat()-l.getBounds().getSouthWest().lat())*t,lng:l.getBounds().getNorthEast().lng()},ne:{lat:l.getBounds().getNorthEast().lat(),lng:l.getBounds().getNorthEast().lng()},sw:{lat:l.getBounds().getSouthWest().lat()+(l.getBounds().getNorthEast().lat()-l.getBounds().getSouthWest().lat())*t,lng:l.getBounds().getSouthWest().lng()},se:{lat:l.getBounds().getNorthEast().lat(),lng:l.getBounds().getSouthWest().lng()}};u.setBounds(a)}return s?r.a.createElement("div",null,"Failed loading the map. Please try again later."):i?function(){var e={zoomControlOptions:{position:window.google.maps.ControlPosition.RIGHT_TOP},rotateControl:!1,scaleControl:!1,streetViewControl:!1,panControl:!1,fullscreenControl:!1};return r.a.createElement(Me.a,{options:e,mapContainerStyle:Ae,center:Ye,zoom:11,onLoad:c,onBoundsChanged:m})}():r.a.createElement("div",null,"Loading...")})),Fe=a(165),Ie=a(94),qe=a(856),Te=a(448),De=a(420);function Ve(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=JSON.stringify(t),l=Object(n.useState)(!0),c=Object(E.a)(l,2),o=c[0],i=c[1],s=Object(n.useState)(void 0),u=Object(E.a)(s,2),m=u[0],p=u[1],d=Object(qe.a)(t,a,{equalityFn:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}}),g=Object(E.a)(d,1),f=g[0],v=Object(De.a)(e,f),b=Object(E.a)(v,2),y=b[0],h=b[1],_=h.loading,O=h.data,j=Object(Te.a)((function(){y()}),a),x=Object(E.a)(j,1),S=x[0];return Object(n.useEffect)((function(){i(!0),S()}),[r,S]),Object(n.useEffect)((function(){!1===_&&O&&(i(!1),p(O))}),[_]),{loading:_||o,data:O||m}}var Ge=a(449),We=a.n(Ge);function ze(){var e=Object(n.useContext)(Re),t=Object(n.useMemo)((function(){return[[e.bounds.nw.lng,e.bounds.nw.lat],[e.bounds.ne.lng,e.bounds.ne.lat],[e.bounds.sw.lng,e.bounds.sw.lat],[e.bounds.se.lng,e.bounds.se.lat]]}),[e.bounds]),a=Object(n.useMemo)((function(){return b.riga.features.filter((function(e){return We()(e.geometry.coordinates[0],t)})).map((function(e){return e.properties.id}))}),[t]);return{region:[e.region],locations:a.length>10?void 0:a}}var He=a(245),Ue=a.n(He);var Je=function(e){var t=e.children;return e.year,r.a.createElement("div",null,r.a.createElement(h.a,{as:"h4"},"Selected Area"),r.a.createElement("div",null,r.a.createElement("div",{className:Ue.a.currency},"\u20ac"),r.a.createElement("div",{className:Ue.a.amount},t),r.a.createElement("div",{className:Ue.a.label},"Average Price last 30 days")))},Ke=a(450),Ze=a(308),Qe=a.n(Ze);function Xe(){var e=Object(Fe.a)(["\n  query(\n    $type: String!\n    $region: [String!]!\n    $locations: [String!]\n  ) {\n    ","\n  }\n"]);return Xe=function(){return e},e}var et=Object(Ke.extendMoment)(pe.a),tt=et().range(et().utc().startOf("day").subtract(30,"days"),new Date),at=Array.from(tt.by("day",{excludeEnd:!0}));function nt(e){return e?at.map((function(t,a){return e?{x:t.format("YYYY-MM-DD"),y:e["row_".concat(a)].summary.price.mean}:{}})):[]}var rt=function(e){var t,a=e.type,l=ze(),c=l.region,o=l.locations,i=Ve((t=at,Object(Ie.a)(Xe(),t.map((function(e,t){return"\n      row_".concat(t,': properties(\n        filter: {\n          type: { eq: $type }\n          published_at: {\n            gte: "').concat(e.toISOString(),'"\n            lte: "').concat(e.clone().endOf("day").toISOString(),'"\n          }\n          location_classificator: { in: $locations }\n          region: { in: $region }\n        }\n      ) {\n        summary {\n          price(discard: 0.1) {\n            mean\n          }\n        }\n      }\n    ')})))),{variables:{type:a,region:c,locations:o}},2e3),s=i.loading,u=i.data,m=Object(n.useMemo)((function(){return[{id:"Average price",data:nt(u)}]}),[u]);return r.a.createElement(ie.a,{basic:!0,className:Qe.a.container},r.a.createElement(se.a,{inverted:!0,active:s},r.a.createElement(ue.a,null)),r.a.createElement(de.a,{data:m,margin:{top:5,right:5,bottom:5,left:5},xScale:{type:"time",format:"%Y-%m-%d",precision:"day"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",stacked:!1},sliceTooltip:function(e){var t=e.slice;return r.a.createElement("div",{className:Qe.a.tooltip},t.points.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("div",null,r.a.createElement("strong",null,et(e.data.x).format("YYYY-MM-DD"))),r.a.createElement("div",null,r.a.createElement("strong",null,e.serieId,":")," ",Number(e.data.yFormatted).toLocaleString("en",{minimumFractionDigits:2})," ","EUR"))})))},colors:["#543193"],axisLeft:{enable:!1,tickSize:0},axisBottom:!1,enableGridX:!1,enableGridY:!1,enablePoints:!1,curve:"natural",useMesh:!1,enableSlices:"x"}))},lt=a(451),ct=a(314),ot=a.n(ct);function it(){var e=Object(Fe.a)(['\n  query(\n    $type: String!\n    $date: String!\n    $region: [String!]!\n    $locations: [String!]\n  ) {\n    mean_price: properties(\n      filter: {\n        type: { eq: $type }\n        published_at: { gte: $date }\n        location_classificator: { in: $locations }\n        region: { in: $region }\n      }\n    ) {\n      summary {\n        price(discard: 0.1) {\n          mean\n        }\n      }\n    }\n\n    apartment_count: properties(\n      filter: {\n        category: { eq: "APARTMENT" }\n        type: { eq: $type }\n        published_at: { gte: $date }\n        location_classificator: { in: $locations }\n        region: { in: $region }\n      }\n    ) {\n      summary {\n        count\n      }\n    }\n\n    house_count: properties(\n      filter: {\n        category: { eq: "HOUSE" }\n        type: { eq: $type }\n        published_at: { gte: $date }\n        location_classificator: { in: $locations }\n        region: { in: $region }\n      }\n    ) {\n      summary {\n        count\n      }\n    }\n\n    land_count: properties(\n      filter: {\n        category: { eq: "LAND" }\n        type: { eq: $type }\n        published_at: { gte: $date }\n        location_classificator: { in: $locations }\n        region: { in: $region }\n      }\n    ) {\n      summary {\n        count\n      }\n    }\n  }\n']);return it=function(){return e},e}var st=["#543193","#543193","#543193"],ut=Object(Ie.a)(it());function mt(e){return[{category:"Land",value:e?e.land_count.summary.count:0},{category:"House",value:e?e.house_count.summary.count:0},{category:"Apartment",value:e?e.apartment_count.summary.count:0}]}var pt=function(e){var t=e.type,a=e.startDate,l=ze(),c=l.region,o=l.locations,i=Ve(ut,{variables:{type:t,date:a,region:c,locations:o}},1e3),s=i.loading,u=i.data,m=Object(n.useState)(st),p=Object(E.a)(m,2),d=p[0],g=p[1];return r.a.createElement("div",null,r.a.createElement(h.a,{as:"h4",className:ot.a.title},"Property type distribution"),r.a.createElement(ie.a,{basic:!0,className:ot.a.container},r.a.createElement(se.a,{inverted:!0,active:s},r.a.createElement(ue.a,null)),r.a.createElement(lt.a,{data:mt(u),layout:"horizontal",enableGridY:!1,enableLabel:!1,axisLeft:{tickSize:0},axisBottom:!1,keys:["value"],indexBy:"category",margin:{top:0,right:0,bottom:0,left:60},animate:!0,colors:d,padding:.4,onClick:function(e){var t=e.index;g((function(e){if("#c0ace3"===e[t])return st;var a=[].concat(st);return a[t]="#c0ace3",a}))}})))},dt=a(315),gt=a.n(dt);function ft(){var e=Object(Fe.a)(["\n  query(\n    $type: String!\n    $date: String!\n    $region: [String!]!\n    $locations: [String!]\n  ) {\n    properties(\n      filter: {\n        type: { eq: $type }\n        published_at: { gte: $date }\n        location_classificator: { in: $locations }\n        region: { in: $region }\n      }\n    ) {\n      summary {\n        price(discard: 0.1) {\n          mean\n        }\n      }\n    }\n  }\n"]);return ft=function(){return e},e}var vt=Object(Ie.a)(ft());function Et(e){var t=e.price;return t?parseInt(t,10).toLocaleString("en"):"Unknown"}var bt=function(){var e=ze(),t=e.region,a=e.locations,l=Object(n.useState)(pe()().subtract(30,"days").format("YYYY-MM-DD")),c=Object(E.a)(l,1)[0],o=Object(n.useState)("sell"),i=Object(E.a)(o,1)[0],s=Ve(vt,{variables:{type:i,date:c,region:t,locations:a}},1e3),u=s.loading,m=s.error,p=s.data,d=u||!p;return m?r.a.createElement("div",{className:gt.a.container},r.a.createElement(h.a,{as:"h4"},"An unexpected error occured when attempting to fetch the data. Try again later.")):r.a.createElement("div",{className:gt.a.container,id:"map-overlay"},r.a.createElement(v.a,null,r.a.createElement(v.a.Column,{computer:8},r.a.createElement(Je,null,d?r.a.createElement(_e.a,null):r.a.createElement(Et,{price:p.properties.summary.price.mean})),r.a.createElement(rt,{type:i})),r.a.createElement(v.a.Column,{computer:8},r.a.createElement(pt,{type:i,startDate:c}))))},yt=a(453),ht=a.n(yt);function _t(e){return[[e.ne.lat,e.ne.lng].join(" "),[e.nw.lat,e.nw.lng].join(" "),[e.sw.lat,e.sw.lng].join(" "),[e.se.lat,e.se.lng].join(" "),[e.ne.lat,e.ne.lng].join(" ")].join(", ")}var Ot=function(){var e=Object(n.useState)({setBounds:function(e){l((function(t){return Object(R.a)(Object(R.a)({},t),{},{bounds:e,region:_t(e)})}))},bounds:{ne:{},nw:{},se:{},sw:{}},region:""}),t=Object(E.a)(e,2),a=t[0],l=t[1];return r.a.createElement("div",{className:ht.a.container},r.a.createElement(Re.Provider,{value:a},r.a.createElement(Be,null),r.a.createElement(bt,null)))},jt=a(175),xt=a.n(jt);var St=function(e){return r.a.createElement(f.a,{fluid:!0,className:xt.a.container},r.a.createElement(g.a,{className:xt.a.githubCorner,href:"https://github.com/brokalys/map-app"}),r.a.createElement(v.a,{className:xt.a.grid},r.a.createElement(v.a.Column,{computer:9,className:xt.a.leftPanel},r.a.createElement(Le,null)),r.a.createElement(v.a.Column,{computer:7,className:xt.a.rightPanel},r.a.createElement(Ot,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(814),a(815),a(816),a(817);var kt=w.getPlugin("react").createErrorBoundary(r.a);c.a.render(r.a.createElement(kt,null,r.a.createElement(o.RecoilRoot,null,r.a.createElement(i.a,{client:p},r.a.createElement(St,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[570,1,2]]]);
//# sourceMappingURL=main.0e45983b.chunk.js.map