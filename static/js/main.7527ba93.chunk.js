(this["webpackJsonpmap-app"]=this["webpackJsonpmap-app"]||[]).push([[0],{193:function(e,t,n){e.exports={statisticAddon:"MeanPriceInFilterLocation_statisticAddon__ZZijL",textGreen:"MeanPriceInFilterLocation_textGreen__1TxZ3",textRed:"MeanPriceInFilterLocation_textRed__2oGI9"}},194:function(e,t,n){e.exports={container:"App_container__1MQN3",grid:"App_grid__3DnSg",leftPanel:"App_leftPanel__3Hl9k",rightPanel:"App_rightPanel__kN-EW",githubCorner:"App_githubCorner__3BLKB"}},288:function(e,t,n){e.exports={content:"SplitPaneLeft_content__4SUVj",highlightedText:"SplitPaneLeft_highlightedText__2q005"}},289:function(e,t,n){e.exports={currency:"AreaOverview_currency__1aglq",label:"AreaOverview_label__1Cauv",amount:"AreaOverview_amount__KkYcy"}},326:function(e,t,n){e.exports={shake:"Navigation_shake__1loJY","bell-shake":"Navigation_bell-shake__28FvC",notificationLink:"Navigation_notificationLink__dwBb-"}},340:function(e,t,n){e.exports={container:"PropertyPriceChart_container__b6m2Q",tooltip:"PropertyPriceChart_tooltip__iGhsd"}},343:function(e,t,n){e.exports={container:"PropertyPriceLine_container__3NyhK",tooltip:"PropertyPriceLine_tooltip__1tDKM"}},347:function(e,t,n){e.exports={container:"PropertyTypeChart_container__3smv6",title:"PropertyTypeChart_title__1REaR"}},468:function(e,t,n){e.exports={container:"FilterToolbar_container__3xqZF"}},491:function(e,t,n){e.exports={container:"MapOverlay_container__16kzn"}},492:function(e,t,n){e.exports={container:"SplitPaneRight_container__x3kzx"}},768:function(e,t,n){},769:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(28),i=n.n(c),o=n(32),s=n(57),l=new s.ApolloClient({cache:new s.InMemoryCache,link:new s.HttpLink({uri:"https://api.brokalys.com"})}),u=n(465),j=n.n(u),d=n(830),b=n(844),p=n(9),h=n(166),g=n(274),O=n(843),x=n(836),f=n(839),m=n(323),v=n.n(m),y=n(466),_=n.n(y);v.a.start({releaseStage:"production",enabledReleaseStages:["production"],apiKey:"d834235e29f9f8aba796385d728e56f2",plugins:[new _.a],collectUserIp:!1});var k=v.a,S=n(834),C=n(833),w=n(324),P=n(17),N=n.n(P),L=n(59),A=n(18),B=n(467),M=n.n(B),$=Object(o.b)({key:"filters",default:{category:"apartment",type:"sell",location:"latvia-riga-vecpilseta",priceType:"total"}}),Y=Object(o.c)({key:"filters.category",get:function(e){return(0,e.get)($).category},set:function(e,t){var n=e.get;return(0,e.set)($,Object(A.a)(Object(A.a)({},n($)),{},{category:t}))}}),q=Object(o.c)({key:"filters.type",get:function(e){return(0,e.get)($).type},set:function(e,t){var n=e.get;return(0,e.set)($,Object(A.a)(Object(A.a)({},n($)),{},{type:t}))}}),F=Object(o.c)({key:"filters.location",get:function(e){return(0,e.get)($).location},set:function(e,t){var n=e.get;return(0,e.set)($,Object(A.a)(Object(A.a)({},n($)),{},{location:t}))}}),E=Object(o.c)({key:"filters.priceType",get:function(e){return(0,e.get)($).priceType},set:function(e,t){var n=e.get;return(0,e.set)($,Object(A.a)(Object(A.a)({},n($)),{},{priceType:t}))}}),I=Object(o.d)({key:"getPrices",get:function(e){return function(){var t=Object(L.a)(N.a.mark((function t(n){var r,a,c,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=function(){return(c=Object(L.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("https://static-api.brokalys.com/stats/monthly?discard=0.1&filters=".concat(r));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(){return c.apply(this,arguments)},n.get,r=encodeURIComponent(JSON.stringify(e)),i=0,t.abrupt("return",new Promise(function(){var e=Object(L.a)(N.a.mark((function e(n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:if(!(0===(r=e.sent).loadingResults||i++>=3)){e.next=5;break}return e.abrupt("return",n(r));case 5:setTimeout((function(){return t(n)}),r.loadingResults<=2?1e3:3e3);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),R=Object(o.c)({key:"priceInFilteredLocation",get:function(){var e=Object(L.a)(N.a.mark((function e(t){var n,r,a,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,r=n(F),a=n(q),c=n(Y),e.next=6,n(I({category:c,type:a,location_classificator:r}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),T=Object(o.c)({key:"meanPriceLastMonth",get:function(){var e=Object(L.a)(N.a.mark((function e(t){var n,r,a,c,i,o,s,l,u;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,r=n(F),a=n(q),c=n(Y),i=n(E),e.next=7,n(I({category:c,type:a,location_classificator:r}));case 7:return o=e.sent,s=o.results,l="sqm"===i?"pricePerSqm":"price",u=s[s.length-1][l].mean,e.abrupt("return",{price:u,change:{mom:100*(1-u/s[s.length-2][l].mean),yoy:100*(1-u/s[s.length-13][l].mean)}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),H=Object(o.c)({key:"rentalYield",get:function(){var e=Object(L.a)(N.a.mark((function e(t){var n,r,a,c,i,o,s,l,u;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.get,r=n(Y),a=n(F),c=n(E),e.next=6,Promise.all([n(I({category:r,type:"sell",location_classificator:a})),n(I({category:r,type:"rent",location_classificator:a}))]);case 6:return i=e.sent,o=Object(p.a)(i,2),s=o[0].results,l=o[1].results,u="sqm"===c?"pricePerSqm":"price",e.abrupt("return",l[l.length-1][u].mean/s[s.length-1][u].mean*100);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),D=n(468),z=n.n(D),G=n(2),W=h.riga.features.map((function(e){return{value:e.properties.id,text:e.properties.name}})),V=[{value:"apartment",text:"Apartment"},{value:"house",text:"House"},{value:"land",text:"Land"}],U=[{value:"sell",text:"Sell"},{value:"rent",text:"Rent"}],Z=[{value:"total",text:"Total price"},{value:"sqm",text:"Price/sqm"}];var J=function(){var e=Object(o.e)(F),t=Object(p.a)(e,2)[1],n=Object(o.e)(Y),r=Object(p.a)(n,2)[1],a=Object(o.e)(q),c=Object(p.a)(a,2)[1],i=Object(o.e)(E),s=Object(p.a)(i,2)[1];return Object(G.jsx)("div",{className:z.a.container,children:Object(G.jsxs)(S.a,{secondary:!0,children:[Object(G.jsx)(S.a.Item,{fitted:!0,children:Object(G.jsx)(C.a,{placeholder:"Select location",search:function(e,t){var n=new RegExp(Object(w.transliterate)(t),"i");return e.filter((function(e){return n.test(Object(w.transliterate)(e.text))}))},selection:!0,defaultValue:"latvia-riga-vecpilseta",options:W,onChange:function(e,n){return t(n.value)}})}),Object(G.jsx)(S.a.Item,{fitted:!0,children:Object(G.jsx)(C.a,{placeholder:"Select category",fluid:!0,selection:!0,defaultValue:"apartment",options:V,onChange:function(e,t){return r(t.value)}})}),Object(G.jsx)(S.a.Item,{fitted:!0,children:Object(G.jsx)(C.a,{placeholder:"Select type",fluid:!0,selection:!0,defaultValue:"sell",options:U,onChange:function(e,t){return c(t.value)}})}),Object(G.jsx)(S.a.Item,{fitted:!0,children:Object(G.jsx)(C.a,{placeholder:"Select price type",fluid:!0,selection:!0,defaultValue:"total",options:Z,onChange:function(e,t){return s(t.value)}})})]})})},K=n(831),Q=n(191),X=n(838),ee=n(326),te=n.n(ee);var ne=function(){return Object(G.jsxs)(S.a,{secondary:!0,children:[Object(G.jsx)(S.a.Header,{children:Object(G.jsx)("img",{src:"https://brokalys.com/favicon.png",alt:"logo",height:"40px"})}),Object(G.jsx)(S.a.Item,{position:"right",children:Object(G.jsx)(K.a,{content:"Sign up for instant notifications about classifieds matching your parameters",inverted:!0,position:"bottom right",trigger:Object(G.jsx)("a",{href:"https://pinger.brokalys.com",target:"_blank",rel:"noopener noreferrer",className:te.a.notificationLink,"data-testid":"pinger-button",children:Object(G.jsx)(Q.a,{name:"bell outline",className:te.a.shake})})})}),Object(G.jsx)(S.a.Item,{fitted:!0,children:Object(G.jsxs)(X.a,{primary:!0,animated:"vertical",onClick:function(){window.location.href="mailto:matiss@brokalys.com?subject=Feedback"},children:[Object(G.jsx)(X.a.Content,{visible:!0,children:"Give feedback"}),Object(G.jsx)(X.a.Content,{hidden:!0,children:Object(G.jsx)(Q.a,{name:"mail"})})]})})]})},re=n(795),ae=n(497),ce=n(10),ie=n(842),oe=n(840),se=n(827),le=n(106),ue=n.n(le),je=n(273),de=n(340),be=n.n(de);function pe(){var e=Object(o.f)(E),t=Object(o.f)(R).results,n=Object(r.useMemo)((function(){return[{id:"Average Price",data:t.map((function(t){var n="sqm"===e?t.pricePerSqm:t.price;return Object(A.a)(Object(A.a)({},n),{},{x:t.start_datetime.substr(0,10),y:n.mean})}))}]}),[t,e]),a=n[0].data.reduce((function(e,t){var n=t.max;return n>e?n:e}),0);function c(t){var n=t.value;return Object(G.jsxs)("span",{children:[Number(n).toLocaleString("en",{minimumFractionDigits:2})," ","sqm"===e?Object(G.jsxs)("span",{children:["EUR/m",Object(G.jsx)("sup",{children:"2"})]}):"EUR"]})}return Object(G.jsx)(je.a,{data:n,margin:{top:10,right:10,bottom:100,left:50},xScale:{type:"time",format:"%Y-%m-%d",precision:"month"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",stacked:!1,max:1.05*a},sliceTooltip:function(e){var t=e.slice;return Object(G.jsx)("div",{className:be.a.tooltip,children:t.points.map((function(e){return Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{children:Object(G.jsx)("strong",{children:ue()(e.data.x).format("YYYY-MM-DD")})}),Object(G.jsxs)("div",{children:[Object(G.jsx)("strong",{children:"Min:"})," ",Object(G.jsx)(c,{value:e.data.min})]}),Object(G.jsxs)("div",{children:[Object(G.jsxs)("strong",{children:[e.serieId,":"]})," ",Object(G.jsx)(c,{value:e.data.yFormatted})]}),Object(G.jsxs)("div",{children:[Object(G.jsx)("strong",{children:"Max:"})," ",Object(G.jsx)(c,{value:e.data.max})]}),Object(G.jsx)("hr",{}),Object(G.jsxs)("div",{children:[Object(G.jsx)("strong",{children:"Mode:"})," ",Object(G.jsx)(c,{value:e.data.mode})]}),Object(G.jsxs)("div",{children:[Object(G.jsx)("strong",{children:"Median:"})," ",Object(G.jsx)(c,{value:e.data.median})]})]},e.id)}))})},axisBottom:{format:"%Y-%m",tickValues:"every 2 months",tickRotation:-90},enablePoints:!0,curve:"monotoneX",useMesh:!0,enableSlices:"x",layers:["grid","markers","axes","areas","crosshair",he,"lines","points","slices","mesh","legends"]})}function he(e){var t=e.series,n=e.xScale,r=e.yScale,a=(e.innerHeight,Object(re.a)().x((function(e){return n(e.data.x)})).y0((function(e){return r(e.data.min)})).y1((function(e){return r(e.data.max)})).curve(ae.a));return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(ce.b,{defs:[{id:"pattern",type:"patternLines",background:"transparent",color:"#3daff7",lineWidth:1,spacing:6,rotation:-45}]}),Object(G.jsx)("path",{d:a(t[0].data),fill:"url(#pattern)",fillOpacity:.2,stroke:"#3daff7",strokeWidth:.4})]})}var ge=function(){return Object(G.jsx)(ie.a,{basic:!0,className:be.a.container,children:Object(G.jsx)(g.ErrorBoundary,{fallback:Object(G.jsx)(x.a,{negative:!0,children:"Failed loading chart data. Please try again later."}),onError:k.notify,children:Object(G.jsx)(a.a.Suspense,{fallback:Object(G.jsx)(oe.a,{inverted:!0,active:!0,children:Object(G.jsx)(se.a,{})}),children:Object(G.jsx)(pe,{})})})})},Oe=n(832),xe=n(176),fe=n.n(xe),me=n(193),ve=n.n(me);function ye(){return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("p",{children:"MoM: month-over-month"}),Object(G.jsx)("p",{children:"YoY: year-over-year"})]})}function _e(){var e=Object(o.f)(E),t=Object(o.f)(T),n=t.price,r=t.change.mom,a=t.change.yoy;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)(f.a.Value,{children:[Object(G.jsxs)("div",{className:ve.a.statisticAddon,children:[isFinite(r)&&Object(G.jsxs)("div",{children:[Object(G.jsxs)("span",{className:r<0?ve.a.textGreen:ve.a.textRed,children:[r<0?"+":"",-r.toFixed(2),"%"]})," ","MoM"]}),isFinite(a)&&Object(G.jsxs)("div",{children:[Object(G.jsxs)("span",{className:a<0?ve.a.textGreen:ve.a.textRed,children:[a<0?"+":"",-a.toFixed(2),"%"]})," ","YoY"]})]}),parseInt(n,10).toLocaleString("en")]}),Object(G.jsxs)(f.a.Label,{children:["Average Price (EUR","sqm"===e?Object(G.jsxs)("span",{children:["/m",Object(G.jsx)("sup",{children:"2"})]}):"",") ",Object(G.jsx)(Oe.b,{content:Object(G.jsx)(ye,{}),children:Object(G.jsx)(Oe.a,{icon:"help"})})]})]})}var ke=function(){return Object(G.jsx)(f.a,{children:Object(G.jsx)(a.a.Suspense,{fallback:Object(G.jsx)(fe.a,{height:60,width:240}),children:Object(G.jsx)(_e,{})})})};function Se(){var e=Object(o.f)(H);return Object(G.jsxs)(f.a.Value,{children:[e.toFixed(2),"%"]})}function Ce(){return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("p",{children:"How much of the invested capital can I expect to make back each year?"}),Object(G.jsx)("p",{children:"A bigger number is better for landlords; a smaller - for renters."}),Object(G.jsx)("p",{children:"Calculation: average rent price / sell price in the last month"})]})}var we=function(){return Object(G.jsxs)(f.a,{children:[Object(G.jsx)(a.a.Suspense,{fallback:Object(G.jsx)(fe.a,{height:42}),children:Object(G.jsx)(Se,{})}),Object(G.jsxs)(f.a.Label,{children:["Rental Yield"," ",Object(G.jsx)(Oe.b,{content:Object(G.jsx)(Ce,{}),children:Object(G.jsx)(Oe.a,{icon:"help"})})]})]})},Pe=n(288),Ne=n.n(Pe);var Le=function(){var e=Object(o.e)($),t=Object(p.a)(e,1)[0],n=h.riga.features.find((function(e){return e.properties.id===t.location})).properties.name;return Object(G.jsxs)("div",{className:Ne.a.container,children:[Object(G.jsx)(ne,{}),Object(G.jsxs)("div",{className:Ne.a.content,children:[Object(G.jsxs)(O.a,{as:"h2",children:["Average Prices in"," ",Object(G.jsx)("span",{className:Ne.a.highlightedText,children:n})]}),Object(G.jsx)(J,{}),Object(G.jsx)(ge,{}),Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{as:"h3",children:"Last Month"}),Object(G.jsx)(g.ErrorBoundary,{fallback:Object(G.jsx)(x.a,{negative:!0,children:"Failed loading the data. Please try again later."}),onError:k.notify,children:Object(G.jsxs)(f.a.Group,{size:"small",children:[Object(G.jsx)(ke,{}),Object(G.jsx)(we,{})]})})]})]})]})},Ae=n(213),Be=n(164),Me=a.a.createContext();function $e(e){var t=Object(r.useState)({setActiveBuilding:function(e){c((function(t){return t.activeBuilding===e?t:Object(A.a)(Object(A.a)({},t),{},{activeBuilding:e})}))},activeBuilding:void 0,buildingCount:0,setBuildingCount:function(e){i("buildingCount",e)},loading:!1,error:void 0,setLoading:function(e){i("loading",e)},setError:function(e){i("error",e)}}),n=Object(p.a)(t,2),a=n[0],c=n[1];function i(e,t){c((function(n){return Object(A.a)(Object(A.a)({},n),{},Object(Be.a)({},e,t))}))}return Object(G.jsx)(Me.Provider,{value:a,children:e.children})}var Ye=Me,qe=a.a.createContext();function Fe(){var e=Object(r.useContext)(Ye);return[e.activeBuilding,e.setActiveBuilding]}var Ee,Ie=n(128),Re=n(829),Te=n(483);function He(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=JSON.stringify(t),c=Object(r.useState)(!0),i=Object(p.a)(c,2),o=i[0],l=i[1],u=Object(r.useState)(void 0),j=Object(p.a)(u,2),d=j[0],b=j[1],h=Object(Re.a)(t,n,{equalityFn:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}}),g=Object(p.a)(h,1),O=g[0],x=Object(s.useLazyQuery)(e,O),f=Object(p.a)(x,2),m=f[0],v=f[1],y=v.loading,_=v.error,k=v.data,S=Object(Te.a)((function(){m()}),n),C=S.callback;return Object(r.useEffect)((function(){l(!0),C()}),[a,C]),Object(r.useEffect)((function(){!1===y&&k&&(l(!1),b(k))}),[y]),{error:_,loading:y||o&&!_,data:k||d}}var De=Object(s.gql)(Ee||(Ee=Object(Ie.a)(["\n  query($region: String!) {\n    buildings(bounds: $region) {\n      id\n      bounds\n      properties {\n        results {\n          category\n          type\n          rent_type\n          price\n          price_per_sqm\n          rooms\n          area\n          floor\n          published_at\n        }\n      }\n    }\n  }\n"])));function ze(){var e=Fe(),t=Object(p.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(r.useContext)(qe).region,t=Object(r.useContext)(Ye),n=t.setBuildingCount,a=t.setError,c=t.setLoading,i=He(De,{variables:{region:e}},1e3),o=i.loading,s=i.error,l=i.data,u=l?l.buildings:[];return Object(r.useEffect)((function(){c(o)}),[c,o]),Object(r.useEffect)((function(){a(s)}),[a,s]),Object(r.useEffect)((function(){n(u.length)}),[n,u.length]),{loading:o,error:s,data:u}}().data;return c.filter((function(e){return e.properties.results.length>0})).map((function(e){return Object(G.jsx)(Ae.b,{onClick:function(){return function(e){a(e===n?void 0:e)}(e)},paths:e.bounds.split(", ").map((function(e){var t=e.split(" "),n=Object(p.a)(t,2),r=n[0],a=n[1];return{lat:parseFloat(r),lng:parseFloat(a)}})),options:n&&n.id===e.id?{strokeColor:"green",fillColor:"green"}:{strokeColor:"black",fillColor:"black"}},e.id)}))}var Ge={lat:56.94,lng:24.096752456107843},We={width:"100%",height:"100%"};function Ve(e){var t=a.a.useState(null),n=Object(p.a)(t,2),c=n[0],i=n[1],o=Object(Ae.c)({googleMapsApiKey:"AIzaSyADke6h-GKt5dPB8IcjVeQ0lAaC1wL_LwY"}),s=o.isLoaded,l=o.loadError,u=Object(r.useContext)(qe),j=Fe(),d=Object(p.a)(j,2)[1];function b(){var e=c.getDiv().clientHeight,t=1-document.getElementById("map-overlay").offsetTop/e,n={nw:{lat:c.getBounds().getSouthWest().lat()+(c.getBounds().getNorthEast().lat()-c.getBounds().getSouthWest().lat())*t,lng:c.getBounds().getNorthEast().lng()},ne:{lat:c.getBounds().getNorthEast().lat(),lng:c.getBounds().getNorthEast().lng()},sw:{lat:c.getBounds().getSouthWest().lat()+(c.getBounds().getNorthEast().lat()-c.getBounds().getSouthWest().lat())*t,lng:c.getBounds().getSouthWest().lng()},se:{lat:c.getBounds().getNorthEast().lat(),lng:c.getBounds().getSouthWest().lng()}};u.setBounds(n),u.setZoom(c.getZoom()),d(void 0)}return l?Object(G.jsx)("div",{children:"Failed loading the map. Please try again later."}):s?function(){var e={zoomControlOptions:{position:window.google.maps.ControlPosition.RIGHT_TOP},rotateControl:!1,scaleControl:!1,streetViewControl:!1,panControl:!1,fullscreenControl:!1};return Object(G.jsx)(Ae.a,{options:e,mapContainerStyle:We,center:Ge,zoom:u.zoom,onLoad:i,onBoundsChanged:b,children:u.zoom>=17&&Object(G.jsx)(ze,{})})}():Object(G.jsx)("div",{children:"Loading..."})}var Ue=a.a.memo(Ve),Ze=n(835),Je={yearly:"/y",monthly:"/m",weekly:"/w",daily:"/d"};function Ke(){var e=Fe(),t=Object(p.a)(e,1)[0];return t?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(x.a,{info:!0,children:Object(G.jsx)("p",{children:"Data might be inaccurate. Some people provide wrong locations for their classifieds."})}),Object(G.jsxs)(Ze.a,{basic:"very",singleLine:!0,selectable:!0,compact:"very",textAlign:"right",children:[Object(G.jsx)(Ze.a.Header,{children:Object(G.jsxs)(Ze.a.Row,{children:[Object(G.jsx)(Ze.a.HeaderCell,{textAlign:"left",children:"Category"}),Object(G.jsx)(Ze.a.HeaderCell,{textAlign:"left",children:"Type"}),Object(G.jsx)(Ze.a.HeaderCell,{children:"Total price"}),Object(G.jsx)(Ze.a.HeaderCell,{children:"SQM Price"}),Object(G.jsx)(Ze.a.HeaderCell,{children:"Area"}),Object(G.jsx)(Ze.a.HeaderCell,{children:"Rooms"}),Object(G.jsx)(Ze.a.HeaderCell,{children:"Floor"}),Object(G.jsx)(Ze.a.HeaderCell,{children:"Published At"})]})}),Object(G.jsx)(Ze.a.Body,{children:t.properties.results.map((function(e,t){return Object(G.jsxs)(Ze.a.Row,{children:[Object(G.jsx)(Ze.a.Cell,{textAlign:"left",children:e.category}),Object(G.jsx)(Ze.a.Cell,{textAlign:"left",children:e.type}),Object(G.jsxs)(Ze.a.Cell,{children:[e.price.toLocaleString()," \u20ac","rent"===e.type&&Je[e.rent_type]]}),Object(G.jsx)(Ze.a.Cell,{children:e.price_per_sqm&&Object(G.jsxs)(G.Fragment,{children:[Math.round(e.price_per_sqm).toLocaleString()," \u20ac/m",Object(G.jsx)("sup",{children:"2"})]})}),Object(G.jsx)(Ze.a.Cell,{children:e.area&&Object(G.jsxs)(G.Fragment,{children:[e.area.toLocaleString()," m",Object(G.jsx)("sup",{children:"2"})]})}),Object(G.jsx)(Ze.a.Cell,{children:e.rooms}),Object(G.jsx)(Ze.a.Cell,{children:e.floor}),Object(G.jsx)(Ze.a.Cell,{children:e.published_at?ue()(e.published_at).format("YYYY-MM-DD HH:mm"):"Before 2018"})]},t)}))})]})]}):Object(G.jsxs)(x.a,{info:!0,children:[Object(G.jsx)(x.a.Header,{children:"Interested to see details of a specific property?"}),Object(G.jsx)("p",{children:"Click on one of the highlighted properties to see the historical data for this property."})]})}function Qe(){var e=Object(r.useContext)(Ye);return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(oe.a,{inverted:!0,active:e.loading,children:Object(G.jsx)(se.a,{content:"Loading new buildings.."})}),e.error&&Object(G.jsx)(x.a,{negative:!0,children:"An unexpected error occured when attempting to fetch the data. Try again later."}),Object(G.jsx)(Ke,{})]})}var Xe=n(484),et=n.n(Xe);function tt(){var e=Object(r.useContext)(qe),t=Object(r.useMemo)((function(){return[[e.bounds.nw.lng,e.bounds.nw.lat],[e.bounds.ne.lng,e.bounds.ne.lat],[e.bounds.sw.lng,e.bounds.sw.lat],[e.bounds.se.lng,e.bounds.se.lat]]}),[e.bounds]),n=Object(r.useMemo)((function(){return h.riga.features.filter((function(e){return et()(e.geometry.coordinates[0],t)})).map((function(e){return e.properties.id}))}),[t]);return{region:[e.region],locations:n.length>10?void 0:n}}var nt=n(289),rt=n.n(nt);var at,ct=function(e){var t=e.children;return e.year,Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{as:"h4",children:"Selected Area"}),Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:rt.a.currency,children:"\u20ac"}),Object(G.jsx)("div",{className:rt.a.amount,children:t}),Object(G.jsx)("div",{className:rt.a.label,children:"Average Price last 30 days"})]})]})},it=n(485),ot=n(343),st=n.n(ot),lt=Object(it.extendMoment)(ue.a),ut=lt().range(lt().utc().startOf("day").subtract(30,"days"),new Date),jt=Array.from(ut.by("day",{excludeEnd:!0}));function dt(e){return e?jt.map((function(t,n){return e?{x:t.format("YYYY-MM-DD"),y:e["row_".concat(n)].summary.price.mean}:{}})):[]}var bt,pt=function(e){var t,n=e.type,a=tt(),c=a.region,i=a.locations,o=He((t=jt,Object(s.gql)(at||(at=Object(Ie.a)(["\n  query(\n    $type: String!\n    $region: [String!]!\n    $locations: [String!]\n  ) {\n    ","\n  }\n"])),t.map((function(e,t){return"\n      row_".concat(t,': properties(\n        filter: {\n          type: { eq: $type }\n          published_at: {\n            gte: "').concat(e.toISOString(),'"\n            lte: "').concat(e.clone().endOf("day").toISOString(),'"\n          }\n          location_classificator: { in: $locations }\n          region: { in: $region }\n        }\n      ) {\n        summary {\n          price(discard: 0.1) {\n            mean\n          }\n        }\n      }\n    ')})))),{variables:{type:n,region:c,locations:i}},2e3),l=o.loading,u=o.data,j=Object(r.useMemo)((function(){return[{id:"Average price",data:dt(u)}]}),[u]);return Object(G.jsxs)(ie.a,{basic:!0,className:st.a.container,children:[Object(G.jsx)(oe.a,{inverted:!0,active:l,children:Object(G.jsx)(se.a,{})}),Object(G.jsx)(je.a,{data:j,margin:{top:5,right:5,bottom:5,left:5},xScale:{type:"time",format:"%Y-%m-%d",precision:"day"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",stacked:!1},sliceTooltip:function(e){var t=e.slice;return Object(G.jsx)("div",{className:st.a.tooltip,children:t.points.map((function(e){return Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{children:Object(G.jsx)("strong",{children:lt(e.data.x).format("YYYY-MM-DD")})}),Object(G.jsxs)("div",{children:[Object(G.jsxs)("strong",{children:[e.serieId,":"]})," ",Number(e.data.yFormatted).toLocaleString("en",{minimumFractionDigits:2})," ","EUR"]})]},e.id)}))})},colors:["#543193"],axisLeft:{enable:!1,tickSize:0},axisBottom:!1,enableGridX:!1,enableGridY:!1,enablePoints:!1,curve:"natural",useMesh:!1,enableSlices:"x"})]})},ht=n(486),gt=n(347),Ot=n.n(gt),xt="#543193",ft="#c0ace3",mt=[xt,xt,xt],vt=Object(s.gql)(bt||(bt=Object(Ie.a)(['\n  query(\n    $type: String!\n    $date: String!\n    $region: [String!]!\n    $locations: [String!]\n  ) {\n    mean_price: properties(\n      filter: {\n        type: { eq: $type }\n        published_at: { gte: $date }\n        location_classificator: { in: $locations }\n        region: { in: $region }\n      }\n    ) {\n      summary {\n        price(discard: 0.1) {\n          mean\n        }\n      }\n    }\n\n    apartment_count: properties(\n      filter: {\n        category: { eq: "APARTMENT" }\n        type: { eq: $type }\n        published_at: { gte: $date }\n        location_classificator: { in: $locations }\n        region: { in: $region }\n      }\n    ) {\n      summary {\n        count\n      }\n    }\n\n    house_count: properties(\n      filter: {\n        category: { eq: "HOUSE" }\n        type: { eq: $type }\n        published_at: { gte: $date }\n        location_classificator: { in: $locations }\n        region: { in: $region }\n      }\n    ) {\n      summary {\n        count\n      }\n    }\n\n    land_count: properties(\n      filter: {\n        category: { eq: "LAND" }\n        type: { eq: $type }\n        published_at: { gte: $date }\n        location_classificator: { in: $locations }\n        region: { in: $region }\n      }\n    ) {\n      summary {\n        count\n      }\n    }\n  }\n'])));function yt(e){return[{category:"Land",value:e?e.land_count.summary.count:0},{category:"House",value:e?e.house_count.summary.count:0},{category:"Apartment",value:e?e.apartment_count.summary.count:0}]}var _t,kt=function(e){var t=e.type,n=e.startDate,a=tt(),c=a.region,i=a.locations,o=He(vt,{variables:{type:t,date:n,region:c,locations:i}},1e3),s=o.loading,l=o.data,u=Object(r.useState)(mt),j=Object(p.a)(u,2),d=j[0],b=j[1];return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{as:"h4",className:Ot.a.title,children:"Property type distribution"}),Object(G.jsxs)(ie.a,{basic:!0,className:Ot.a.container,children:[Object(G.jsx)(oe.a,{inverted:!0,active:s,children:Object(G.jsx)(se.a,{})}),Object(G.jsx)(ht.a,{data:yt(l),layout:"horizontal",enableGridY:!1,enableLabel:!1,axisLeft:{tickSize:0},axisBottom:!1,keys:["value"],indexBy:"category",margin:{top:0,right:0,bottom:0,left:60},animate:!0,colors:d,padding:.4,onClick:function(e){var t=e.index;b((function(e){if(e[t]===ft)return mt;var n=[].concat(mt);return n[t]=ft,n}))}})]})]})},St=Object(s.gql)(_t||(_t=Object(Ie.a)(["\n  query(\n    $type: String!\n    $date: String!\n    $region: [String!]!\n    $locations: [String!]\n  ) {\n    properties(\n      filter: {\n        type: { eq: $type }\n        published_at: { gte: $date }\n        location_classificator: { in: $locations }\n        region: { in: $region }\n      }\n    ) {\n      summary {\n        price(discard: 0.1) {\n          mean\n        }\n      }\n    }\n  }\n"])));function Ct(e){var t=e.price;return t?parseInt(t,10).toLocaleString("en"):"Unknown"}function wt(){var e=tt(),t=e.region,n=e.locations,a=Object(r.useState)(ue()().subtract(30,"days").format("YYYY-MM-DD")),c=Object(p.a)(a,1)[0],i=Object(r.useState)("sell"),o=Object(p.a)(i,1)[0],s=He(St,{variables:{type:o,date:c,region:t,locations:n}},1e3),l=s.loading,u=s.error,j=s.data,d=l||!j;return n&&n.length?u?Object(G.jsx)(O.a,{as:"h4",children:"An unexpected error occured when attempting to fetch the data. Try again later."}):Object(G.jsxs)(b.a,{children:[Object(G.jsxs)(b.a.Column,{computer:8,children:[Object(G.jsx)(ct,{children:d?Object(G.jsx)(fe.a,{}):Object(G.jsx)(Ct,{price:j.properties.summary.price.mean})}),Object(G.jsx)(pt,{type:o})]}),Object(G.jsx)(b.a.Column,{computer:8,children:Object(G.jsx)(kt,{type:o,startDate:c})})]}):Object(G.jsxs)(x.a,{warning:!0,children:[Object(G.jsx)(x.a.Header,{children:"Brokalys cannot give an overview for this region"}),Object(G.jsxs)("p",{children:[Object(G.jsx)("strong",{children:"Why?"})," you might be outside Riga or you have zoomed out too much"]}),Object(G.jsx)("p",{children:"Interested to see data on a specific building in the countryside or Riga? Zoom in and click on it."})]})}var Pt=n(491),Nt=n.n(Pt);var Lt=function(){var e=Object(r.useContext)(qe).zoom;return Object(G.jsx)("div",{className:Nt.a.container,id:"map-overlay",children:e>=17?Object(G.jsx)(Qe,{}):Object(G.jsx)(wt,{})})},At=n(492),Bt=n.n(At);function Mt(e){return[[e.ne.lat,e.ne.lng].join(" "),[e.nw.lat,e.nw.lng].join(" "),[e.sw.lat,e.sw.lng].join(" "),[e.se.lat,e.se.lng].join(" "),[e.ne.lat,e.ne.lng].join(" ")].join(", ")}var $t=function(){var e=Object(r.useState)({setBounds:function(e){a((function(t){return Object(A.a)(Object(A.a)({},t),{},{bounds:e,region:Mt(e)})}))},setZoom:function(e){a((function(t){return Object(A.a)(Object(A.a)({},t),{},{zoom:e})}))},bounds:{ne:{},nw:{},se:{},sw:{}},zoom:14,region:""}),t=Object(p.a)(e,2),n=t[0],a=t[1];return Object(G.jsx)("div",{className:Bt.a.container,children:Object(G.jsx)(qe.Provider,{value:n,children:Object(G.jsxs)($e,{children:[Object(G.jsx)(Ue,{}),Object(G.jsx)(Lt,{})]})})})},Yt=n(194),qt=n.n(Yt);var Ft=function(e){return Object(G.jsxs)(d.a,{fluid:!0,className:qt.a.container,children:[Object(G.jsx)(j.a,{className:qt.a.githubCorner,href:"https://github.com/brokalys/map-app",direction:"left"}),Object(G.jsxs)(b.a,{className:qt.a.grid,children:[Object(G.jsx)(b.a.Column,{computer:9,className:qt.a.leftPanel,children:Object(G.jsx)(Le,{})}),Object(G.jsx)(b.a.Column,{computer:7,className:qt.a.rightPanel,children:Object(G.jsx)($t,{})})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(765),n(766),n(767),n(768);var Et=k.getPlugin("react").createErrorBoundary(a.a);i.a.render(Object(G.jsx)(Et,{children:Object(G.jsx)(o.a,{children:Object(G.jsx)(s.ApolloProvider,{client:l,children:Object(G.jsx)(Ft,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[769,1,2]]]);
//# sourceMappingURL=main.7527ba93.chunk.js.map