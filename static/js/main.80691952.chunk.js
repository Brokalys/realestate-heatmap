(this["webpackJsonpmap-app"]=this["webpackJsonpmap-app"]||[]).push([[0],{190:function(e,t,n){e.exports={statisticAddon:"MeanPriceInFilterLocation_statisticAddon__ZZijL",textGreen:"MeanPriceInFilterLocation_textGreen__1TxZ3",textRed:"MeanPriceInFilterLocation_textRed__2oGI9"}},191:function(e,t,n){e.exports={container:"App_container__1MQN3",grid:"App_grid__3DnSg",leftPanel:"App_leftPanel__3Hl9k",rightPanel:"App_rightPanel__kN-EW",githubCorner:"App_githubCorner__3BLKB"}},310:function(e,t,n){e.exports={shake:"Navigation_shake__1loJY","bell-shake":"Navigation_bell-shake__28FvC",notificationLink:"Navigation_notificationLink__dwBb-"}},329:function(e,t,n){e.exports={container:"PropertyPriceChart_container__b6m2Q",tooltip:"PropertyPriceChart_tooltip__iGhsd"}},330:function(e,t,n){e.exports={content:"Home_content__sgIvw",highlightedText:"Home_highlightedText__3zLCN"}},433:function(e,t,n){e.exports={loadingIndicator:"BuildingPolygons_loadingIndicator__12R8e"}},434:function(e,t,n){e.exports={container:"SplitPaneRight_container__x3kzx"}},435:function(e,t,n){e.exports={stats:"BuildingTable_stats__3-b6T"}},437:function(e,t,n){e.exports={container:"FilterToolbar_container__3xqZF"}},624:function(e,t,n){},625:function(e,t,n){"use strict";n.r(t);var r=n(88),a=n(0),c=n.n(a),i=n(55),s=n.n(i),o=n(24),l=n(50),j=n(427),u=new l.HttpLink({uri:"https://api.brokalys.com"}),d=new j.RestLink({uri:"https://static-api.brokalys.com/stats/monthly"}),b=new l.ApolloClient({cache:new l.InMemoryCache,link:l.ApolloLink.from([d,u])}),p=n(258),h=n(430),O=n.n(h),x=n(682),g=n(695),f=n(691),m=n(683),v=n(188),y=n(689),_=n(310),w=n.n(_),C=n(2);var k=function(){return Object(C.jsxs)(f.a,{secondary:!0,children:[Object(C.jsx)(f.a.Header,{children:Object(C.jsx)("img",{src:"https://brokalys.com/favicon.png",alt:"logo",height:"40px"})}),Object(C.jsx)(f.a.Item,{position:"right",children:Object(C.jsx)(m.a,{content:"Sign up for instant notifications about classifieds matching your parameters",inverted:!0,position:"bottom right",trigger:Object(C.jsx)("a",{href:"https://pinger.brokalys.com",target:"_blank",rel:"noopener noreferrer",className:w.a.notificationLink,"data-testid":"pinger-button",children:Object(C.jsx)(v.a,{name:"bell outline",className:w.a.shake})})})}),Object(C.jsx)(f.a.Item,{fitted:!0,children:Object(C.jsxs)(y.a,{primary:!0,animated:"vertical",onClick:function(){window.location.href="mailto:matiss@brokalys.com?subject=Feedback"},children:[Object(C.jsx)(y.a.Content,{visible:!0,children:"Give feedback"}),Object(C.jsx)(y.a.Content,{hidden:!0,children:Object(C.jsx)(v.a,{name:"mail"})})]})})]})},S=n(20),P=n(144);var I,L="CLICK_ON_BUILDING",M="RETURN_TO_HOME_CLICKED",N="MAP_BOUNDS_CHANGED",R="MAP_PROJECTION_CHANGED",F="SET_SELECTED_NEIGHBORHOOD",q="SET_NEIGHBORHOOD_FILTERS",E=function(e){return{type:R,payload:e}},A=function(e){return{type:q,payload:e}},H=n(694),B=n(693),T=n(674),z=n(168),D=Object(l.gql)(I||(I=Object(z.a)(["\n  query($region: String!) {\n    buildings(bounds: $region) {\n      id\n      bounds\n      properties {\n        results {\n          category\n          type\n          rent_type\n          price\n          price_per_sqm\n          rooms\n          area\n          floor\n          published_at\n        }\n      }\n    }\n  }\n"])));var Y=n(83),G=function(e){return e.map};var W=Object(Y.a)(G,(function(e){return function(e){if(e.ne)return[[e.ne.lat,e.ne.lng].join(" "),[e.nw.lat,e.nw.lng].join(" "),[e.sw.lat,e.sw.lng].join(" "),[e.se.lat,e.se.lng].join(" "),[e.ne.lat,e.ne.lng].join(" ")].join(", ")}(e.bounds)})),U=(Object(Y.a)(G,(function(e){return e.bounds})),n(259)),V=n(31),Z=n(169),$=function(e){return e.neighborhood},K=Z.riga.features.reduce((function(e,t){return Object(V.a)(Object(V.a)({},e),{},Object(U.a)({},t.properties.id,t.geometry.coordinates))}),{}),Q=Object(Y.a)($,(function(e){return{id:e.selected,region:K[e.selected]}})),J=Object(Y.a)($,(function(e){return e.filters})),X=Object(Y.a)((function(e){return e.router}),(function(e){return e.location})),ee=Object(Y.a)(X,(function(e){return e.pathname})),te=Object(Y.a)(X,(function(e){return e.query})),ne=n(433),re=n.n(ne);function ae(e){var t=Object(o.d)(),n=Object(p.e)().buildingId,r=function(e){var t=Object(l.useQuery)(D,{variables:{region:e}}),n=t.loading,r=t.data;return{loading:n,data:(null===r||void 0===r?void 0:r.buildings)||[]}}(e.region),a=r.loading,c=r.data,i=function(e){var n;t((n=e.id,{type:L,payload:n}))};return a?Object(C.jsx)(H.a,{circular:!0,className:re.a.loadingIndicator,children:Object(C.jsx)(B.a,{active:!0,children:Object(C.jsx)(T.a,{})})}):c.filter((function(e){return e.properties.results.length>0})).map((function(e){return Object(C.jsx)(P.b,{onClick:function(){return i(e)},paths:e.bounds.split(", ").map((function(e){var t=e.split(" "),n=Object(S.a)(t,2),r=n[0],a=n[1];return{lat:parseFloat(r),lng:parseFloat(a)}})),options:n&&n===e.id.toString()?{strokeColor:"green",fillColor:"green"}:{strokeColor:"black",fillColor:"black"}},e.id)}))}function ce(){var e=Object(o.e)(W);return e?Object(C.jsx)(ae,{region:e}):null}var ie=c.a.memo(ce);function se(){var e=Object(o.e)(Q).region;return Object(C.jsx)(P.b,{paths:e.map((function(e){return e.map((function(e){var t=Object(S.a)(e,2);return{lng:t[0],lat:t[1]}}))})),options:{strokeColor:"black",fillColor:"black",fillOpacity:.2}})}var oe={width:"100%",height:"100%"};function le(e){var t=function(){var e=Object(p.e)(),t=e.lat,n=void 0===t?56.94:t,r=e.lng,c=void 0===r?24.097:r,i=e.zoom,s=void 0===i?15:i;return Object(a.useMemo)((function(){return{lat:parseFloat(n),lng:parseFloat(c),zoom:parseInt(s,10)}}),[n,c,s])}(),n=Object(a.useState)(t),r=Object(S.a)(n,1)[0],c=Object(a.useState)(null),i=Object(S.a)(c,2),s=i[0],l=i[1],j=Object(P.c)({googleMapsApiKey:"AIzaSyADke6h-GKt5dPB8IcjVeQ0lAaC1wL_LwY"}),u=j.isLoaded,d=j.loadError,b=Object(o.d)(),h=Object(a.useCallback)((function(){s&&b({type:N,payload:s})}),[b,s]),O=Object(a.useCallback)((function(){return b(E(s))}),[b,s]);return d?Object(C.jsx)("div",{children:"Failed loading the map. Please try again later."}):u?function(){var e={zoomControlOptions:{position:window.google.maps.ControlPosition.RIGHT_TOP},rotateControl:!1,scaleControl:!1,streetViewControl:!1,panControl:!1,fullscreenControl:!1};return Object(C.jsxs)(P.a,{options:e,mapContainerStyle:oe,center:r,zoom:r.zoom,onLoad:l,onProjectionChanged:O,onDragEnd:h,onZoomChanged:h,children:[t.zoom<=14&&t.zoom>=12&&Object(C.jsx)(se,{}),t.zoom>=17&&Object(C.jsx)(ie,{})]})}():Object(C.jsx)("div",{children:"Loading..."})}var je=c.a.memo(le),ue=n(434),de=n.n(ue);var be,pe=function(){return Object(C.jsx)("div",{className:de.a.container,children:Object(C.jsx)(je,{})})},he=n(170),Oe=n(171),xe=n.n(Oe),ge=n(687),fe=function(e){var t,n="pending",r=e.then((function(e){n="success",t=e}),(function(e){n="error",t=e}));return{read:function(){switch(n){case"pending":throw r;case"error":throw t;default:return t}}}};function me(){var e=l.useQuery.apply(void 0,arguments);return e.loading&&fe(new Promise((function(t){return!e.loading&&t()}))).read(),e}var ve=Object(l.gql)(be||(be=Object(z.a)(["\n  query($id: Int!) {\n    buildings(id: $id) {\n      id\n      bounds\n      properties {\n        results {\n          id\n          category\n          type\n          rent_type\n          price\n          price_per_sqm\n          rooms\n          area\n          floor\n          published_at\n        }\n      }\n    }\n  }\n"])));var ye=n(49),_e=n(211),we=n(686),Ce=n(698),ke=n(260),Se=n.n(ke),Pe=n(95),Ie=n(690);function Le(e){return e.reduce((function(e,t){return e+t}),0)/e.length}function Me(e){var t={total:Math.min.apply(Math,Object(Pe.a)(e.prices.total)),sqm:Math.min.apply(Math,Object(Pe.a)(e.prices.sqm))},n={total:parseInt(Le(e.prices.total),10),sqm:parseInt(Le(e.prices.sqm),10)},r={total:Math.max.apply(Math,Object(Pe.a)(e.prices.total)),sqm:Math.max.apply(Math,Object(Pe.a)(e.prices.sqm))};return Object(C.jsx)(g.a,{columns:3,textAlign:"center",divided:!0,children:Object(C.jsxs)(g.a.Row,{children:[Object(C.jsx)(g.a.Column,{children:Object(C.jsxs)(Ie.a,{size:"small",children:[Object(C.jsx)(Ie.a.Label,{children:"Min"}),Object(C.jsxs)(Ie.a.Value,{children:[t.total.toLocaleString(),Object(C.jsx)("small",{children:"\u20ac"})]}),Object(C.jsxs)(Ie.a.Label,{children:["(",t.sqm.toLocaleString()," ",Object(C.jsxs)("small",{children:["\u20ac/m",Object(C.jsx)("sup",{children:"2"})]}),")"]})]})}),Object(C.jsx)(g.a.Column,{children:Object(C.jsxs)(Ie.a,{size:"small",children:[Object(C.jsx)(Ie.a.Label,{children:"Average"}),Object(C.jsxs)(Ie.a.Value,{children:[n.total.toLocaleString(),Object(C.jsx)("small",{children:"\u20ac"})]}),Object(C.jsxs)(Ie.a.Label,{children:["(",n.sqm.toLocaleString()," ",Object(C.jsxs)("small",{children:["\u20ac/m",Object(C.jsx)("sup",{children:"2"})]}),")"]})]})}),Object(C.jsx)(g.a.Column,{children:Object(C.jsxs)(Ie.a,{size:"small",children:[Object(C.jsx)(Ie.a.Label,{children:"Max"}),Object(C.jsxs)(Ie.a.Value,{children:[r.total.toLocaleString(),Object(C.jsx)("small",{children:"\u20ac"})]}),Object(C.jsxs)(Ie.a.Label,{children:["(",r.sqm.toLocaleString()," ",Object(C.jsxs)("small",{children:["\u20ac/m",Object(C.jsx)("sup",{children:"2"})]}),")"]})]})})]})})}var Ne=n(435),Re=n.n(Ne),Fe={yearly:"/y",monthly:"/m",weekly:"/w",daily:"/d"},qe=[{Header:"Category",accessor:"category",filter:"equals"},{Header:"Type",accessor:"type",filter:"equals"},{accessor:"rent_type",filter:"equals"},{Header:"Total price",Cell:function(e){var t=e.row.original;return Object(C.jsxs)(C.Fragment,{children:[t.price.toLocaleString()," \u20ac","rent"===t.type&&Fe[t.rent_type]]})},accessor:"price"},{Header:"SQM Price",Cell:function(e){var t=e.value;return t?Object(C.jsxs)(C.Fragment,{children:[Math.round(t).toLocaleString()," \u20ac/m",Object(C.jsx)("sup",{children:"2"})]}):null},accessor:"price_per_sqm"},{Header:"Area",Cell:function(e){var t=e.value;return t?Object(C.jsxs)(C.Fragment,{children:[t.toLocaleString()," m",Object(C.jsx)("sup",{children:"2"})]}):null},accessor:"area"},{Header:"Rooms",accessor:"rooms"},{Header:"Published at",Cell:function(e){var t=e.value;return t?Se()(t).format("YYYY-MM-DD HH:mm"):"Before 2018"},accessor:"published_at"}];function Ee(e){return["category","type"].includes(e.column.id)?"left":"right"}function Ae(e){return e.id}function He(){var e,t=Object(o.d)(),n=Object(o.e)((e="page",Object(Y.a)(te,(function(t){return t[e]}))))||1,r=Object(a.useCallback)((function(e,n){var r=n.activePage;t(Object(ye.d)("?page="+r))}),[t]);return[parseInt(n,10)-1,r]}function Be(e){var t=He(),n=Object(S.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)((function(){return t=e.filters,Object.entries(t).filter((function(e){return!!Object(S.a)(e,2)[1]})).map((function(e){var t=Object(S.a)(e,2);return{id:t[0],value:t[1]}}));var t})),s=Object(S.a)(i,1)[0],o=Object(_e.useTable)({columns:qe,data:e.building.properties.results,initialState:{sortBy:[{id:"published_at",desc:!0}],filters:s,pageSize:15,pageIndex:r,hiddenColumns:["rent_type"]},getRowId:Ae},_e.useFilters,_e.useSortBy,_e.usePagination),l=o.setFilter,j=o.headerGroups,u=o.rows,d=o.page,b=o.prepareRow,p=o.pageCount,h=o.gotoPage,O=o.state.pageIndex,x=Object(a.useCallback)((function(e,t){h(t.activePage-1),c(e,t)}),[h,c]);Object(a.useEffect)((function(){Object.entries(e.filters).forEach((function(e){var t=Object(S.a)(e,2),n=t[0],r=t[1];return l(n,r)}))}),[e.filters,l]);var g=Object(a.useMemo)((function(){return{total:u.map((function(e){return e.original.price})).filter((function(e){return e>0})),sqm:u.map((function(e){return e.original.price_per_sqm})).filter((function(e){return e>0}))}}),[u]),f=d.length>0;return Object(C.jsxs)(C.Fragment,{children:[f&&Object(C.jsx)("div",{className:Re.a.stats,children:Object(C.jsx)(Me,{prices:g})}),Object(C.jsxs)(we.a,{singleLine:f,sortable:!0,children:[Object(C.jsx)(we.a.Header,{children:j.map((function(e){return Object(C.jsx)(we.a.Row,Object(V.a)(Object(V.a)({textAlign:"center"},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(C.jsx)(we.a.HeaderCell,Object(V.a)(Object(V.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{sorted:e.isSorted?e.isSortedDesc?"descending":"ascending":null,children:e.render("Header")}))}))}))}))}),Object(C.jsxs)(we.a.Body,{children:[d.map((function(e){return b(e),Object(C.jsx)(we.a.Row,Object(V.a)(Object(V.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(C.jsx)(we.a.Cell,Object(V.a)(Object(V.a)({textAlign:Ee(e)},e.getCellProps()),{},{children:e.render("Cell")}))}))}))})),!f&&Object(C.jsx)(we.a.Row,{children:Object(C.jsx)(we.a.Cell,{colSpan:qe.length,textAlign:"center",children:Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"No classifieds could be found with the given filters."})," ","Clear the filters or open a different property to see data."]})})})]}),p>1&&Object(C.jsx)(we.a.Footer,{children:Object(C.jsx)(we.a.Row,{children:Object(C.jsx)(we.a.HeaderCell,{colSpan:qe.length,children:Object(C.jsx)(Ce.a,{activePage:O+1,boundaryRange:1,onPageChange:x,size:"mini",siblingRange:2,totalPages:p})})})})]})]})}var Te=n(684),ze=[{value:"apartment",text:"Apartment"},{value:"house",text:"House"},{value:"land",text:"Land"}],De=[{value:"sell",text:"Sell"},{value:"rent",text:"Rent"}],Ye=[{value:"yearly",text:"Yearly"},{value:"monthly",text:"Monthly"},{value:"weekly",text:"Weekly"},{value:"daily",text:"Daily"}];function Ge(e){var t=e.onChange,n=Object(a.useState)(),r=Object(S.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(),o=Object(S.a)(s,2),l=o[0],j=o[1],u=Object(a.useState)(),d=Object(S.a)(u,2),b=d[0],p=d[1],h=Object(a.useMemo)((function(){return{category:c||void 0,type:l||void 0,rent_type:"rent"===l&&b||void 0}}),[c,l,b]);return Object(a.useEffect)((function(){t(h)}),[t,h]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(f.a.Item,{fitted:!0,children:Object(C.jsx)(Te.a,{placeholder:"Select category",clearable:!0,selection:!0,value:c,options:ze,onChange:function(e,t){return i(t.value)}})}),Object(C.jsx)(f.a.Item,{fitted:!0,children:Object(C.jsx)(Te.a,{placeholder:"Select type",clearable:!0,selection:!0,value:l,options:De,onChange:function(e,t){return j(t.value)}})}),"rent"===l&&Object(C.jsx)(f.a.Item,{fitted:!0,children:Object(C.jsx)(Te.a,{placeholder:"Select rent type",clearable:!0,selection:!0,fluid:!0,value:b,options:Ye,onChange:function(e,t){return p(t.value)}})})]})}function We(e){var t=Object(o.d)(),n=Object(a.useCallback)((function(){return t({type:M})}),[t]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(f.a,{secondary:!0,children:[Object(C.jsx)(f.a.Item,{fitted:!0,children:Object(C.jsx)(y.a,{content:"Return",icon:"left arrow",labelPosition:"left",onClick:n})}),Object(C.jsx)(Ge,{onChange:e.onFiltersChange})]}),Object(C.jsx)(ge.a,{info:!0,children:Object(C.jsx)("p",{children:"Data might be inaccurate. Some people provide wrong locations for their classifieds."})})]})}function Ue(e){var t=function(){var e=Object(p.e)().buildingId,t=me(ve,{variables:{id:Number(e)}}).data;return((null===t||void 0===t?void 0:t.buildings)||[])[0]}();return t?Object(C.jsx)(Be,Object(V.a)({building:t},e)):Object(C.jsxs)(ge.a,{warning:!0,children:[Object(C.jsx)(ge.a.Header,{children:"Building not found"}),Object(C.jsx)("p",{children:"We could not locate a building here. Try again later."})]})}var Ve=function(){var e=Object(a.useState)({}),t=Object(S.a)(e,2),n=t[0],r=t[1];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(We,{onFiltersChange:r}),Object(C.jsx)(he.ErrorBoundary,{fallback:Object(C.jsx)(ge.a,{negative:!0,children:"An unexpected error occured when attempting to fetch the data. Try again later."}),children:Object(C.jsx)(c.a.Suspense,{fallback:Object(C.jsxs)(H.a,{basic:!0,children:[Object(C.jsx)(B.a,{inverted:!0,active:!0,children:Object(C.jsx)(T.a,{content:"Loading the building data.."})}),Object(C.jsx)(xe.a,{count:20})]}),children:Object(C.jsx)(Ue,{filters:n})})})]})},Ze=n(314),$e=n.n(Ze),Ke=n(436),Qe=n.n(Ke);$e.a.start({releaseStage:"production",enabledReleaseStages:["production"],apiKey:"d834235e29f9f8aba796385d728e56f2",plugins:[new Qe.a],collectUserIp:!1});var Je=$e.a,Xe=n(696),et=n(315),tt=n(437),nt=n.n(tt),rt=Z.riga.features.map((function(e){return{value:e.properties.id,text:e.properties.name}})),at=[{value:"apartment",text:"Apartment"},{value:"house",text:"House"},{value:"land",text:"Land"}],ct=[{value:"sell",text:"Sell"},{value:"rent",text:"Rent"}],it=[{value:"total",text:"Total price"},{value:"sqm",text:"Price/sqm"}];var st,ot=function(){var e=Object(o.d)(),t=Object(o.e)(J),n=t.category,r=t.type,a=t.price,c=Object(o.e)(Q).id;return Object(C.jsx)("div",{className:nt.a.container,children:Object(C.jsxs)(f.a,{secondary:!0,children:[Object(C.jsx)(f.a.Item,{fitted:!0,children:Object(C.jsx)(Te.a,{placeholder:"Select location",search:function(e,t){var n=new RegExp(Object(et.transliterate)(t).replace(/[^a-z\s-]/gi,""),"i");return e.filter((function(e){return n.test(Object(et.transliterate)(e.text))}))},selection:!0,options:rt,value:c,onChange:function(t,n){return e((r=n.value,{type:F,payload:r}));var r}})}),Object(C.jsx)(f.a.Item,{fitted:!0,children:Object(C.jsx)(Te.a,{placeholder:"Select category",fluid:!0,selection:!0,value:n,options:at,onChange:function(t,n){return e(A({category:n.value}))}})}),Object(C.jsx)(f.a.Item,{fitted:!0,children:Object(C.jsx)(Te.a,{placeholder:"Select type",fluid:!0,selection:!0,value:r,options:ct,onChange:function(t,n){return e(A({type:n.value}))}})}),Object(C.jsx)(f.a.Item,{fitted:!0,children:Object(C.jsx)(Te.a,{placeholder:"Select price type",fluid:!0,selection:!0,value:a,options:it,onChange:function(t,n){return e(A({price:n.value}))}})})]})})},lt=n(653),jt=n(457),ut=n(15),dt=n(444),bt=n(329),pt=n.n(bt),ht=Object(l.gql)(st||(st=Object(z.a)(['\n  query($filters: String!) {\n    response(filters: $filters)\n      @rest(\n        type: "PriceResults"\n        method: "GET"\n        path: "/?discard=0.1&filters={args.filters}"\n      ) {\n      loadingResults\n      results {\n        count\n        start_datetime\n        end_datetime\n        price {\n          min\n          max\n          median\n          mean\n          mode\n        }\n        pricePerSqm {\n          min\n          max\n          median\n          mean\n          mode\n        }\n      }\n    }\n  }\n'])));function Ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=Object(a.useState)(0),r=Object(S.a)(n,2),c=r[0],i=r[1],s=Object(o.e)(J),l=s.category,j=s.type,u=Object(o.e)(Q),d=u.id,b={category:l,type:t||j,location_classificator:d},p=encodeURIComponent(JSON.stringify(b)),h=me(ht,{variables:{filters:p},pollInterval:c}),O=h.data,x=(null===O||void 0===O?void 0:O.response)||{},g=x.loadingResults;return Object(a.useEffect)((function(){i((function(){return 0===g?0:g<=2?1e3:3e3}))}),[g]),O.response}function xt(){var e=Object(o.e)(J).price,t=Ot().results,n=Object(a.useMemo)((function(){return[{id:"Average Price",data:t.map((function(t){var n="sqm"===e?t.pricePerSqm:t.price;return Object(V.a)(Object(V.a)({},n),{},{x:t.start_datetime.substr(0,10),y:n.mean})}))}]}),[t,e]),r=n[0].data.reduce((function(e,t){var n=t.max;return n>e?n:e}),0);function c(t){var n=t.value;return Object(C.jsxs)("span",{children:[Number(n).toLocaleString("en",{minimumFractionDigits:2})," ","sqm"===e?Object(C.jsxs)("span",{children:["EUR/m",Object(C.jsx)("sup",{children:"2"})]}):"EUR"]})}return Object(C.jsx)(dt.a,{data:n,margin:{top:10,right:10,bottom:100,left:50},xScale:{type:"time",format:"%Y-%m-%d",precision:"month"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",stacked:!1,max:1.05*r},sliceTooltip:function(e){var t=e.slice;return Object(C.jsx)("div",{className:pt.a.tooltip,children:t.points.map((function(e){return Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{children:Object(C.jsx)("strong",{children:Se()(e.data.x).format("YYYY-MM-DD")})}),Object(C.jsxs)("div",{children:[Object(C.jsx)("strong",{children:"Min:"})," ",Object(C.jsx)(c,{value:e.data.min})]}),Object(C.jsxs)("div",{children:[Object(C.jsxs)("strong",{children:[e.serieId,":"]})," ",Object(C.jsx)(c,{value:e.data.yFormatted})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("strong",{children:"Max:"})," ",Object(C.jsx)(c,{value:e.data.max})]}),Object(C.jsx)("hr",{}),Object(C.jsxs)("div",{children:[Object(C.jsx)("strong",{children:"Mode:"})," ",Object(C.jsx)(c,{value:e.data.mode})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("strong",{children:"Median:"})," ",Object(C.jsx)(c,{value:e.data.median})]})]},e.id)}))})},axisBottom:{format:"%Y-%m",tickValues:"every 2 months",tickRotation:-90},enablePoints:!0,curve:"monotoneX",useMesh:!0,enableSlices:"x",layers:["grid","markers","axes","areas","crosshair",gt,"lines","points","slices","mesh","legends"]})}function gt(e){var t=e.series,n=e.xScale,r=e.yScale,a=(e.innerHeight,Object(lt.a)().x((function(e){return n(e.data.x)})).y0((function(e){return r(e.data.min)})).y1((function(e){return r(e.data.max)})).curve(jt.a));return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ut.b,{defs:[{id:"pattern",type:"patternLines",background:"transparent",color:"#3daff7",lineWidth:1,spacing:6,rotation:-45}]}),Object(C.jsx)("path",{d:a(t[0].data),fill:"url(#pattern)",fillOpacity:.2,stroke:"#3daff7",strokeWidth:.4})]})}var ft=function(){return Object(C.jsx)(H.a,{basic:!0,className:pt.a.container,children:Object(C.jsx)(he.ErrorBoundary,{fallback:Object(C.jsx)(ge.a,{negative:!0,children:"Failed loading chart data. Please try again later."}),onError:Je.notify,children:Object(C.jsx)(c.a.Suspense,{fallback:Object(C.jsx)(B.a,{inverted:!0,active:!0,children:Object(C.jsx)(T.a,{})}),children:Object(C.jsx)(xt,{})})})})};var mt=n(190),vt=n.n(mt);function yt(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("p",{children:"MoM: month-over-month"}),Object(C.jsx)("p",{children:"YoY: year-over-year"})]})}function _t(){var e=Object(o.e)(J).price,t=function(){var e=Object(o.e)(J).price,t=Ot().results,n="sqm"===e?"pricePerSqm":"price",r=t[t.length-1][n].mean;return{price:r,change:{mom:100*(1-r/t[t.length-2][n].mean),yoy:100*(1-r/t[t.length-13][n].mean)}}}(),n=t.price,r=t.change.mom,a=t.change.yoy;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Ie.a.Value,{children:[Object(C.jsxs)("div",{className:vt.a.statisticAddon,children:[isFinite(r)&&Object(C.jsxs)("div",{children:[Object(C.jsxs)("span",{className:r<0?vt.a.textGreen:vt.a.textRed,children:[r<0?"+":"",-r.toFixed(2),"%"]})," ","MoM"]}),isFinite(a)&&Object(C.jsxs)("div",{children:[Object(C.jsxs)("span",{className:a<0?vt.a.textGreen:vt.a.textRed,children:[a<0?"+":"",-a.toFixed(2),"%"]})," ","YoY"]})]}),n?parseInt(n,10).toLocaleString("en"):"?"]}),Object(C.jsxs)(Ie.a.Label,{children:["Average Price (EUR","sqm"===e?Object(C.jsxs)("span",{children:["/m",Object(C.jsx)("sup",{children:"2"})]}):"",")"," ",Object(C.jsx)(m.a,{content:Object(C.jsx)(yt,{}),trigger:Object(C.jsx)(v.a,{name:"help circle"})})]})]})}var wt=function(){return Object(C.jsx)(Ie.a,{children:Object(C.jsx)(c.a.Suspense,{fallback:Object(C.jsx)(xe.a,{height:60,width:240}),children:Object(C.jsx)(_t,{})})})};function Ct(){var e=function(){var e=Object(o.e)(J).price,t=Ot({type:"rent"}).results,n=Ot({type:"sell"}).results;if(!t.length||!n.length)return 0;var r="sqm"===e?"pricePerSqm":"price";return t[t.length-1][r].mean/n[n.length-1][r].mean*100}(),t=e?"".concat(e.toFixed(2),"%"):"?";return Object(C.jsx)(Ie.a.Value,{children:t})}function kt(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("p",{children:"How much of the invested capital can I expect to make back each year?"}),Object(C.jsx)("p",{children:"A bigger number is better for landlords; a smaller - for renters."}),Object(C.jsx)("p",{children:"Calculation: average rent price / sell price in the last month"})]})}var St=function(){return Object(C.jsxs)(Ie.a,{children:[Object(C.jsx)(c.a.Suspense,{fallback:Object(C.jsx)(xe.a,{height:42}),children:Object(C.jsx)(Ct,{})}),Object(C.jsxs)(Ie.a.Label,{children:["Rental Yield"," ",Object(C.jsx)(m.a,{content:Object(C.jsx)(kt,{}),trigger:Object(C.jsx)(v.a,{name:"help circle"})})]})]})},Pt=n(330),It=n.n(Pt);var Lt=function(){var e=Object(o.e)(Q).id,t=Z.riga.features.find((function(t){return t.properties.id===e})).properties.name;return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{className:It.a.content,children:[Object(C.jsxs)(Xe.a,{as:"h2",children:["Average Prices in"," ",Object(C.jsx)("span",{className:It.a.highlightedText,children:t})]}),Object(C.jsx)(ot,{}),Object(C.jsx)(ft,{}),Object(C.jsx)(g.a,{children:Object(C.jsxs)(g.a.Row,{children:[Object(C.jsxs)(g.a.Column,{tablet:16,computer:16,largeScreen:10,widescreen:7,children:[Object(C.jsx)(Xe.a,{as:"h3",children:"Last Month"}),Object(C.jsx)(he.ErrorBoundary,{fallback:Object(C.jsx)(ge.a,{negative:!0,children:"Failed loading the data. Please try again later."}),onError:Je.notify,children:Object(C.jsxs)(Ie.a.Group,{size:"small",children:[Object(C.jsx)(wt,{}),Object(C.jsx)(St,{})]})})]}),Object(C.jsx)(g.a.Column,{tablet:16,computer:16,largeScreen:6,widescreen:9,verticalAlign:"bottom",stretched:!0,children:Object(C.jsx)(ge.a,{info:!0,icon:"info",header:"Interested in a specific building?",content:"Zoom in on the map and click on a building. This will show data about your selected property."})})]})})]})})},Mt=n(191),Nt=n.n(Mt);var Rt=function(e){return Object(C.jsxs)(x.a,{fluid:!0,className:Nt.a.container,children:[Object(C.jsx)(O.a,{className:Nt.a.githubCorner,href:"https://github.com/brokalys/map-app",direction:"left"}),Object(C.jsx)(p.c,{children:Object(C.jsx)(p.a,{path:["/:lat,:lng,:zoom/building/:buildingId(\\d+)","/:lat,:lng,:zoom","/"],children:Object(C.jsxs)(g.a,{className:Nt.a.grid,children:[Object(C.jsxs)(g.a.Column,{computer:9,className:Nt.a.leftPanel,children:[Object(C.jsx)(k,{}),Object(C.jsxs)(p.c,{children:[Object(C.jsx)(p.a,{path:"/:lat,:lng,:zoom/building/:buildingId(\\d+)",children:Object(C.jsx)(Ve,{})}),Object(C.jsx)(p.a,{path:"*",children:Object(C.jsx)(Lt,{})})]})]}),Object(C.jsx)(g.a.Column,{computer:7,className:Nt.a.rightPanel,children:Object(C.jsx)(pe,{})})]})})})]})},Ft=n(419),qt=n(96),Et=n(89),At=n(449),Ht=n(451),Bt={bounds:{}};function Tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:var n=t.payload,r={nw:{lat:n.getBounds().getSouthWest().lat(),lng:n.getBounds().getNorthEast().lng()},ne:{lat:n.getBounds().getNorthEast().lat(),lng:n.getBounds().getNorthEast().lng()},sw:{lat:n.getBounds().getSouthWest().lat(),lng:n.getBounds().getSouthWest().lng()},se:{lat:n.getBounds().getNorthEast().lat(),lng:n.getBounds().getSouthWest().lng()}};return Object(V.a)(Object(V.a)({},e),{},{bounds:r});default:return e}}var zt={selected:"latvia-riga-vecpilseta",filters:{category:"apartment",type:"sell",price:"sqm"}};function Dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(V.a)(Object(V.a)({},e),{},{selected:t.payload});case q:return Object(V.a)(Object(V.a)({},e),{},{filters:Object(V.a)(Object(V.a)({},e.filters),t.payload)});default:return e}}var Yt=function(e){return Object(Et.combineReducers)({router:Object(r.b)(e),map:Tt,neighborhood:Dt})},Gt=n(14),Wt=n.n(Gt),Ut=n(42),Vt=Wt.a.mark($t),Zt=Wt.a.mark(Kt);function $t(){var e,t;return Wt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ut.d)(ee);case 2:return e=n.sent,t=e.split("/"),n.next=6,Object(Ut.c)(Object(ye.d)("/".concat(t[1])));case 6:case"end":return n.stop()}}),Vt)}function Kt(){return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ut.f)(M,$t);case 2:case"end":return e.stop()}}),Zt)}var Qt=Kt,Jt=Wt.a.mark(tn),Xt=Wt.a.mark(nn);function en(e){var t=e.reduce((function(t,n){return[t[0]+n[0]/e.length,t[1]+n[1]/e.length]}),[0,0]);return{lat:t[1],lng:t[0]}}function tn(e){var t,n,r,a,c;return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ut.d)(Q);case 2:return t=e.sent,n=t.region,r=en(n[0]),a=r.lat,c=r.lng,e.next=7,Object(Ut.c)(Object(ye.d)("/".concat(a,",").concat(c,",13")));case 7:case"end":return e.stop()}}),Jt)}function nn(){return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ut.e)(F,tn);case 2:case"end":return e.stop()}}),Xt)}var rn=nn,an=Wt.a.mark(sn),cn=Wt.a.mark(on);function sn(e){var t,n,r,a;return Wt.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.next=3,Object(Ut.d)(ee);case 3:return n=c.sent,r=n.split("/"),a="/".concat(r[1],"/building/").concat(t),"building"===r[2]&&r[3]===String(t)&&(a="/".concat(r[1])),c.next=9,Object(Ut.c)(Object(ye.d)(a));case 9:case"end":return c.stop()}}),an)}function on(){return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ut.f)(L,sn);case 2:case"end":return e.stop()}}),cn)}var ln=on,jn=Wt.a.mark(dn),un=Wt.a.mark(bn);function dn(e){var t,n,r,a;return Wt.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.next=3,Object(Ut.d)(ee);case 3:if(n=c.sent,r=n.split("/"),a="/".concat(t.center.lat(),",").concat(t.center.lng(),",").concat(t.getZoom()),"building"===r[2]&&(a+="/building/".concat(r[3])),a!==n){c.next=9;break}return c.abrupt("return");case 9:return c.next=11,Object(Ut.c)(Object(ye.d)(a));case 11:case"end":return c.stop()}}),jn)}function bn(){return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ut.f)(N,dn);case 2:case"end":return e.stop()}}),un)}var pn=bn,hn=Wt.a.mark(xn),On=Wt.a.mark(gn);function xn(e){var t;return Wt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(Ut.c)(E(t));case 3:case"end":return n.stop()}}),hn)}function gn(){return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ut.b)(1e3,N,xn);case 2:case"end":return e.stop()}}),On)}var fn=gn,mn=Wt.a.mark(vn);function vn(){return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ut.a)([Qt(),rn(),ln(),pn(),fn()]);case 2:case"end":return e.stop()}}),mn)}var yn=Object(qt.a)({hashType:"slash"}),_n=Object(Ht.a)(),wn=Object(Et.createStore)(Yt(yn),Object(At.composeWithDevTools)(Object(Et.applyMiddleware)(Object(Ft.a)(yn),_n)));_n.run(vn);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(623),n(624);var Cn=Je.getPlugin("react").createErrorBoundary(c.a);s.a.render(Object(C.jsx)(Cn,{children:Object(C.jsx)(o.a,{store:wn,children:Object(C.jsx)(r.a,{history:yn,children:Object(C.jsx)(l.ApolloProvider,{client:b,children:Object(C.jsx)(Rt,{})})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[625,1,2]]]);
//# sourceMappingURL=main.80691952.chunk.js.map